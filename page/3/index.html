<!DOCTYPE html>
<html lang="zh-Hans">
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="åªèƒ½è‡ªå·±åŠªåŠ›æ‰¾ä¹å­äº†">
    <meta name="keywords" content>
    <meta name="author">
    <meta name="copyright">
    <title>_(:Ğ·ã€âˆ )_ | luckyray</title><link rel="shortcut icon" href="/favicons.ico">
    <link rel="stylesheet" href="/css/index.css?version=1.6.1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1">
    <link rel="dns-prefetch" href="https://cdn.staticfile.org">
    <link rel="dns-prefetch" href="https://cdn.bootcss.com">
    <link rel="dns-prefetch" href="https://creativecommons.org">
    <script>
      var GLOBAL_CONFIG = {
        root: '/',
        algolia: undefined,
        localSearch: undefined,
        copy: {
          success: 'å¤åˆ¶æˆåŠŸ',
          error: 'å¤åˆ¶é”™è¯¯',
          noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
        }
      }
    </script>
  </head>
  <body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i>
    <div id="sidebar">
      <div class="author-info">
        <div class="author-info__avatar text-center"><img src="/img/avatar.png"></div>
        <div class="author-info__name text-center"></div>
        <div class="author-info__description text-center">åªèƒ½è‡ªå·±åŠªåŠ›æ‰¾ä¹å­äº†</div>
        <hr>
        <div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">æ–‡ç« </span><span class="pull-right">29</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">æ ‡ç­¾</span><span class="pull-right">8</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">åˆ†ç±»</span><span class="pull-right">6</span></a>
        </div>
      </div>
    </div>
    <nav id="nav" style="background-image: url(http://img.luckyray.cn/896653.jpg)">
      <div id="page-header"><span class="pull-left"> <a id="site-name" href="/">luckyray</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/knowledge-point">çŸ¥è¯†ç‚¹</a></span></div>
      <div id="site-info">
        <div id="site-title">luckyray</div>
        <div id="site-sub-title">_(:Ğ·ã€âˆ )_</div>
        <div id="site-social-icons"><a class="social-icon" href="https://github.com/yoshiro_fan"><i class="fa-github fa"></i></a>
        </div>
      </div>
    </nav>
    <div id="content-outer">
      <div class="layout" id="content-inner">
        <div class="recent-post-item article-container"><a class="article-title" href="/2019/11/01/ç®—æ³•/">ç®—æ³•</a>
          <time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-11-01
          </time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/ç®—æ³•/">ç®—æ³•</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/æ€»ç»“/">æ€»ç»“</a></span>
          <div class="content"><h2 id="ç›®å‰è¿˜æ˜¯æŒºéš¾æŠŠè¿™ä¸ªæƒ³æ¸…æ¥šçš„-19-11-5"><a href="#ç›®å‰è¿˜æ˜¯æŒºéš¾æŠŠè¿™ä¸ªæƒ³æ¸…æ¥šçš„-19-11-5" class="headerlink" title="ç›®å‰è¿˜æ˜¯æŒºéš¾æŠŠè¿™ä¸ªæƒ³æ¸…æ¥šçš„ - 19.11.5"></a>ç›®å‰è¿˜æ˜¯æŒºéš¾æŠŠè¿™ä¸ªæƒ³æ¸…æ¥šçš„ - 19.11.5</h2><h3 id="TODO-ç¡®å®šç»“æ„"><a href="#TODO-ç¡®å®šç»“æ„" class="headerlink" title="TODO ç¡®å®šç»“æ„"></a>TODO ç¡®å®šç»“æ„</h3><p>ç®—æ³•ç›¸å…³çš„æ±‡æ€»ç¯‡ç« , ä»å­¦ä¹ æ–¹æ³•ä¸<strong>åŸç†</strong>åˆ°ç®—æ³•åˆ†ç±»ç”šè‡³ä¹¦ç±é˜…è¯»éƒ½ä¼šåœ¨è¿™é‡Œç¼–å†™</p>
<blockquote>
<p>æƒ³è¦æå‡èƒ½åŠ›, å¿…ä¸å¯å°‘çš„æ˜¯<strong>åˆ»æ„ç»ƒä¹ </strong>, æƒ³æå‡å“ªæ–¹é¢å°±ç»ƒä¹ , æ€»ç»“è¯¥æ–¹é¢<br>æ³¨æ„, <strong>å¿…é¡»</strong>ä¸€ä¸ªè¿ç»­çš„æ—¶é—´æ²‰ä¸‹å¿ƒå†™ç®—æ³•ç»ƒä¹ é¢˜, <strong>æ€»ç»“</strong>, å¹¶ä¸”å½¢æˆè‡ªå·±çš„<strong>çŸ¥è¯†ä½“ç³»å’Œç†è§£</strong>(ä¹Ÿå°±æ˜¯ä¸‹æ–¹çš„æ€»ç»“),å¹¶ä»¥æ­¤ä¸ºæ ‘å¹², <strong>é€æ¸æ·±å…¥</strong>åˆ°è¾¾æ ‘å¶<br>å­¦ä¹ ç®—æ³•, åº”è¯¥å…ˆå­¦å¥½é€»è¾‘è¿‡ç¨‹, ç”¨æŠ½è±¡çš„ä¼ªä»£ç , ä¸æ¶‰åŠè¯­è¨€, å†ç”¨ä¸€é—¨è¯­è¨€å®ç°å®ƒ, åœ¨å®åŠ›ä¸å¼ºçš„æ—¶å€™è¾¹å­¦è¾¹å†™, ä¸Šç½‘å‚è€ƒæœ€ä½³å®è·µ, ä¸è¦çº ç»“æ˜¯å¦ç‹¬ç«‹å®Œæˆ</p>
</blockquote>
<h3 id="æ‰€æƒ³åŠèƒ½å†™"><a href="#æ‰€æƒ³åŠèƒ½å†™" class="headerlink" title="æ‰€æƒ³åŠèƒ½å†™"></a>æ‰€æƒ³åŠèƒ½å†™</h3><p>èƒ½å°†æ‰€æƒ³çš„ç¿»è¯‘æˆä»£ç , æœ€åŸºç¡€çš„è¦æ±‚, éœ€è¦åœ¨ç¼–ç¨‹è¯­è¨€å…¥é—¨æ—¶å°±å®Œæˆ</p>
<h3 id="åŸºç¡€çŸ¥è¯†ç§¯ç´¯"><a href="#åŸºç¡€çŸ¥è¯†ç§¯ç´¯" class="headerlink" title="åŸºç¡€çŸ¥è¯†ç§¯ç´¯"></a>åŸºç¡€çŸ¥è¯†ç§¯ç´¯</h3><p>è¿™ä¸€æ–¹é¢éœ€è¦çš„æ˜¯æ•°æ®ç»“æ„, å¦‚é“¾è¡¨, æ ‘, å †ç­‰</p>
<blockquote>
<p>ç›´æ¥ä¸åº•å±‚å®ç°æ‰“äº¤é“çš„, link, tree, heap<br>æŠ½è±¡ä¸€å±‚çš„, stack, queue, prior queue</p>
</blockquote>
<h3 id="bug-free"><a href="#bug-free" class="headerlink" title="bug free"></a>bug free</h3><p>å¾ªç¯ä¸å˜é‡, å’Œç‰¹ä¾‹è¾“å…¥</p>
<h3 id="å¸¸è§ç®—æ³•è®¾è®¡"><a href="#å¸¸è§ç®—æ³•è®¾è®¡" class="headerlink" title="å¸¸è§ç®—æ³•è®¾è®¡"></a>å¸¸è§ç®—æ³•è®¾è®¡</h3><p>åŠ¨æ€è§„åˆ’, åˆ†æ²», è´ªå¿ƒ, å›æº¯, åˆ†æ”¯é™ç•Œ</p>
<h3 id="å®ç°-è€å®è¯´-æ°´å¹³æœ‰ç‚¹ç»¿è‰²-å°±äº¤ç»™ä»¥åçš„æˆ‘å§"><a href="#å®ç°-è€å®è¯´-æ°´å¹³æœ‰ç‚¹ç»¿è‰²-å°±äº¤ç»™ä»¥åçš„æˆ‘å§" class="headerlink" title="å®ç°(è€å®è¯´, æ°´å¹³æœ‰ç‚¹ç»¿è‰², å°±äº¤ç»™ä»¥åçš„æˆ‘å§)"></a>å®ç°(è€å®è¯´, æ°´å¹³æœ‰ç‚¹ç»¿è‰², å°±äº¤ç»™ä»¥åçš„æˆ‘å§)</h3><p>æ ¹æ®è®ºæ–‡, éœ€æ±‚å°†ä»£ç å®ç°</p>
<h3 id="å°è¯•"><a href="#å°è¯•" class="headerlink" title="å°è¯•"></a>å°è¯•</h3><blockquote>
<p>ç»“è®º, æ²¡æœ‰ç³»ç»Ÿçš„è¯¦ç»†çš„æ·±å…¥<strong>æ€»ç»“</strong>æ€»æ˜¯æ„Ÿè§‰å‘è™š!!<br>ç”¨è‹±æ–‡åªæ˜¯ä¸ºäº†æ˜¾å¾—æ¯”è¾ƒå¸…, æ¯•ç«Ÿåªæœ‰æˆ‘è‡ªå·±çœ‹, ä¸ç”¨è€ƒè™‘å…¶ä»–äºº  <em>(:Ğ·ã€âˆ )\</em></p>
</blockquote>
<ol start="0">
<li>Book: Learning JavaScript Data Structures and Algorithms</li>
<li>OJ: JavaScript codewars kata 4</li>
<li>Book: algorithm ( the 4th edition )</li>
<li>Curriculum: datastructure class in school</li>
<li>Curriculum: <a href="https://www.freecodecamp.org/learn/javascript-algorithms-and-data-structures/basic-javascript/" target="_blank" rel="noopener">JavaScript Algorithms and Data Structures Certification</a></li>
<li>OJ: JavaScript LeetCode 40+</li>
<li>OJ: python LeetCode 40+</li>
<li>OJ: python ccf å¾—äº† 250, å¸Œæœ› 20 å¹´ä¸‰æœˆèƒ½è¶…è¿‡ 350</li>
</ol>
</div>
          <hr>
        </div>
        <div class="recent-post-item article-container"><a class="article-title" href="/2019/10/27/æ–‡ä»¶ä¸Šä¼ ä¸å°åº”ç”¨/">æ–‡ä»¶ä¸Šä¼ ä¸å°åº”ç”¨</a>
          <time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-27
          </time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tools/">tools</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/nodejs/">nodejs</a></span>
          <div class="content"><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><strong>åŸç”Ÿ, æ²¡æœ‰package.json</strong></p>
<p>å°†å›¾ç‰‡æ–‡ä»¶ä¸Šä¼ åˆ°ç”µè„‘ä¸Š, <a href="https://github.com/luckyray-fan/tips/tree/master/upload" target="_blank" rel="noopener">é¡¹ç›®åœ°å€</a></p>
<p><img src="/image/fileupload-00.png" alt="ä¸Šä¼ 25å¼ "></p>
<p><img src="/image/fileupload-01.png" alt="å‰ç«¯æ˜¾ç¤º"></p>
<p><img src="/image/fileupload-02.png" alt="åç«¯æ˜¾ç¤º"></p>
<blockquote>
<p>ä¹‹åç”¨è¿™ä¸ªä¸Šä¼ äº†å‡ ç™¾å¼ , è¶…å–œæ¬¢çš„å›¾å˜¿å˜¿ğŸ˜†</p>
</blockquote>
<h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h2><p>å¹³æ—¶ä¼šç¢°åˆ°<code>ä¸Šä¼ æ–‡ä»¶</code>æˆ–è€…<code>ç”¨æµè§ˆå™¨å¤„ç†æ–‡ä»¶</code>ç­‰æƒ…å†µ, æ‰€ä»¥ä»å‰åç«¯æ¥å†™å„è‡ªçš„åŸç†ä¸è§£å†³æ–¹æ³•ã€‚</p>
<h3 id="åç«¯çš„ä¸Šä¼ å¤„ç†-nodejs"><a href="#åç«¯çš„ä¸Šä¼ å¤„ç†-nodejs" class="headerlink" title="åç«¯çš„ä¸Šä¼ å¤„ç† - nodejs"></a>åç«¯çš„ä¸Šä¼ å¤„ç† - nodejs</h3><h4 id="åŸç”Ÿçš„"><a href="#åŸç”Ÿçš„" class="headerlink" title="åŸç”Ÿçš„"></a>åŸç”Ÿçš„</h4><p>ä» nodejs åŸç”Ÿè¯´èµ·</p>
<blockquote>
<p>è¯¦ç»†å¯ä»¥é˜…è¯» <a href="https://www.zhihu.com/question/58118565" target="_blank" rel="noopener">httpï¼šæ–‡ä»¶ä¸Šä¼ èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</a></p>
</blockquote>
<ol>
<li>æœåŠ¡å™¨æ¥æ”¶åˆ°æ–‡ä»¶æ•°æ®, ä¸‹æ–‡çš„ req ä¾¿æ˜¯ <code>http.createSever(function(req, res) {})</code> é‡Œå¾€åŒ¿åå›è°ƒä¸­ä¼ å…¥çš„å‚æ•°</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">req.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(chunk)</span><br><span class="line">    body += chunk;</span><br><span class="line">  &#125;); <span class="comment">//ç›®æµ‹æ˜¯æŒ‰ ascii è¾“å‡º, å› ä¸ºæ²¡æœ‰å‡ºç°ä¸­æ–‡ä¹±ç    ÃÂ­g0RÃ‡Ã„+Ã“G\I.PÃ’UeOÃ“ZÃ¡QÂµ(Wk</span></span><br><span class="line">  <span class="comment">// å½“ç„¶ æ¯æ¬¡åœ¨ data äº‹ä»¶ä¸­è§¦å‘æŠ“è·çš„æ•°æ®å—æ˜¯ä¸€ä¸ª Buffer æˆ– string, http.incomingMessage ç»§æ‰¿äº† stream, è¿™é‡Œæ˜¯ string, å¯ä»¥ç”¨ typeof çœ‹</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>postæ•°æ®çš„ä¼ è¾“æ˜¯å¯èƒ½åˆ†åŒ…çš„ï¼Œå› æ­¤é‡‡ç”¨ç›‘å¬æ–¹å¼<br>ä½¿ç”¨ node â€“inspect æŸ¥çœ‹çš„å†…å®¹å¦‚ä¸‹</p>
</blockquote>
<p><img src="/image/fileupload-2.png" alt="chunk å†…å®¹"></p>
<ol start="2">
<li>å¯¹æ•°æ®è¿›è¡Œå¤„ç†</li>
</ol>
<blockquote>
<ol>
<li>å°†è¯·æ±‚æŠ¥æ–‡è½¬ä¸ºå¯¹è±¡</li>
<li>åˆ¤æ–­å›¾ç‰‡æ–‡ä»¶, æå–ä¿¡æ¯</li>
<li>è·å–æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®<br>http è¯·æ±‚æŠ¥æ–‡ç»“æ„ä¸º: è¯·æ±‚è¡Œï¼ˆrequest line)ã€æ¶ˆæ¯å¤´éƒ¨ï¼ˆheader) ã€ç©ºè¡Œ(CRLF) ã€è¯·æ±‚æ­£æ–‡, è¯¦ç»†äº†è§£ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Messages" target="_blank" rel="noopener">HTTPæ¶ˆæ¯</a><br><img src="/image/fileupload-1.png" alt="http æŠ¥æ–‡å†…å®¹"></li>
</ol>
</blockquote>
<p>ä½¿ç”¨ <code>querystring.parse</code> è·å–ä¿¡æ¯</p>
<p><img src="/image/fileupload-3.png" alt="è§£æå‡ºæ¥çš„ file å¯¹è±¡"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">req.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> file = querystring.parse(body, <span class="string">'\r\n'</span>, <span class="string">':'</span>);</span><br><span class="line">    <span class="comment">// console.log(file);å°†æ•´ä¸ª Http è¯·æ±‚æŠ¥æ–‡è§£æä¸ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åªå¤„ç†å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (file[<span class="string">'Content-Type'</span>].indexOf(<span class="string">'image'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="comment">//è·å–æ–‡ä»¶å</span></span><br><span class="line">      <span class="keyword">var</span> fileInfo = file[<span class="string">'Content-Disposition'</span>].split(<span class="string">'; '</span>);</span><br><span class="line">      <span class="keyword">for</span> (value <span class="keyword">in</span> fileInfo) &#123;</span><br><span class="line">        <span class="keyword">if</span> (fileInfo[value].indexOf(<span class="string">'filename='</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">          fileName = fileInfo[value].substring(<span class="number">10</span>, fileInfo[value].length - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (fileName.indexOf(<span class="string">'\\'</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">            fileName = fileName.substring(fileName.lastIndexOf(<span class="string">'\\'</span>) + <span class="number">1</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// console.log('æ–‡ä»¶å: ' + fileName);</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è·å–å›¾ç‰‡ç±»å‹(å¦‚ï¼šimage/gif æˆ– image/png))</span></span><br><span class="line">      <span class="keyword">var</span> entireData = body.toString(),</span><br><span class="line">        contentType = file[<span class="string">'Content-Type'</span>].substring(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//è·å–æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®å¼€å§‹ä½ç½®ï¼Œå³contentTypeçš„ç»“å°¾</span></span><br><span class="line">      <span class="keyword">var</span> upperBoundary = entireData.indexOf(contentType) + contentType.length;</span><br><span class="line">      <span class="keyword">var</span> shorterData = entireData.substring(upperBoundary);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ›¿æ¢å¼€å§‹ä½ç½®çš„ç©ºæ ¼</span></span><br><span class="line">      <span class="keyword">var</span> binaryDataAlmost = shorterData.replace(<span class="regexp">/^\s\s*/</span>, <span class="string">''</span>).replace(<span class="regexp">/\s\s*$/</span>, <span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å»é™¤æ•°æ®æœ«å°¾çš„é¢å¤–æ•°æ®ï¼Œå³: "--"+ boundary + "--"</span></span><br><span class="line">      <span class="keyword">var</span> binaryData = binaryDataAlmost.substring(</span><br><span class="line">        <span class="number">0</span>,</span><br><span class="line">        binaryDataAlmost.indexOf(<span class="string">'--'</span> + boundary + <span class="string">'--'</span>)</span><br><span class="line">      );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>http ä¸Šä¼ æ–‡ä»¶, å®é™…ä¸Šæ˜¯ç”±åè®® RFC1867 å¯¹ form è¡¨å•æ‰©å±•è€Œæ¥çš„, å¦‚æœæœ‰å…´è¶£æ¨¡æ‹Ÿ http ä¸Šä¼ æ–‡ä»¶, å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« , ä½œè€…ç”¨çš„æ˜¯ c# - <a href="http://blog.zhaojie.me/2011/03/html-form-file-uploading-programming.html" target="_blank" rel="noopener">æ¨¡æ‹ŸHTMLè¡¨å•ä¸Šä¼ æ–‡ä»¶ï¼ˆRFC 1867ï¼‰</a></p>
</blockquote>
<ol start="3">
<li>å°†æ•°æ®å†™å…¥æ–‡ä»¶</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fs.writeFile(<span class="string">'./image/'</span> + fileName, binaryData, <span class="string">'binary'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// res.writeHead(302, &#123;</span></span><br><span class="line">        <span class="comment">//   Location: '/' æ–‡ä»¶çš„å†™å…¥éœ€è¦bufferç±»å‹çš„æ•°æ®</span></span><br><span class="line">        <span class="comment">// &#125;);</span></span><br><span class="line">        res.writeHead(<span class="number">200</span>); <span class="comment">//æ²¡å†™endå¯¼è‡´å˜æˆäº†æŒä¹…è¿æ¥</span></span><br><span class="line">        res.end(<span class="string">'123'</span>);</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœåªæ¥æ”¶ä¿¡æ¯ä¸è¿”å›çš„è¯, ä¼šæˆä¸ºæŒç»­è¿æ¥, ç”±äºæµè§ˆå™¨å¯¹è¿æ¥æ•°æœ‰æœ€å¤§é™åˆ¶, æ‰€ä»¥ä¼šå‡ºç°åŒæ—¶ä¸Šä¼ æ–‡ä»¶è¶…è¿‡6ä¸ªå¾ˆæ…¢çš„ bug åŸæ–‡å‡ºå¤„ - <a href="https://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser" target="_blank" rel="noopener">Max parallel http connections in a browser?</a></p>
</blockquote>
<h4 id="æ¡†æ¶çš„"><a href="#æ¡†æ¶çš„" class="headerlink" title="æ¡†æ¶çš„"></a>æ¡†æ¶çš„</h4><p>å°†æ¥ç”¨åˆ°å†è¯´, é™¤äº†åŸç†æˆ–è€…æœ‰è¶£çš„ä¸œè¥¿, api è°ƒç”¨ä»€ä¹ˆçš„æ˜¯ä¸ä¼šè°ƒæŸ¥çš„, å½“ç„¶ç”¨è¿‡çš„è¯ä¼šå†™å°±æ˜¯äº†</p>
<h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><p>é¦–å…ˆ, ä¸Šä¼ æ–‡ä»¶è‚¯å®šç”¨çš„æ˜¯ post , å› ä¸º get ä¼ å‚æ”¾åœ¨ url é‡Œæœ‰æœ€å¤§å€¼, è€Œ post æ”¾åœ¨ request.body ä¸­æ²¡æœ‰é™åˆ¶ã€‚</p>
<h4 id="form-enctype"><a href="#form-enctype" class="headerlink" title="form enctype"></a>form enctype</h4><p>é¦–å…ˆè¯´æ˜ä¸€ä¸‹ enctype, ç”¨æ¥æŒ‡ç¤º form æ•°æ®å½¢å¼, å®ƒå¯ä»¥æœ‰ä¸‰ç§å€¼:</p>
<ol>
<li>application/x-www-form-urlencoded æ­£å¸¸å½¢å¼</li>
<li>multipart/form-data ç”¨æ¥ä¼ æ–‡ä»¶</li>
<li>text/plain ä¸ç”¨ç®¡</li>
</ol>
<p>å…¶ä¸­ application/x-www-form-urlencoded æ˜¯åœ¨ headers éƒ¨åˆ†æ·»åŠ  Entity headers (å¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰ bodyï¼Œåˆ™ä¸ä¼šåŒ…å«ã€‚), body æ˜¯æ­£å¸¸ url ç¼–ç çš„å€¼ ä¼ è¾¾çš„å½¢å¼å¦‚ä¸‹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP/1.1</span><br><span class="line">[[ Less interesting headers ... ]]</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Content-Length: 51</span><br><span class="line"></span><br><span class="line">text1=text+default&amp;text2=a%CF%89b&amp;file1=a.txt&amp;file2=a.html&amp;file3=binary</span><br></pre></td></tr></table></figure>

<p>è€Œ multipart/form-data åˆ™ä¼šåœ¨æ·»åŠ  boundary æ¥åŒºåˆ†, å¹¶åœ¨æœ€åçš„ boundary æ·»åŠ ä¸¤ä¸ªè¿å·ä»£è¡¨ç»“å°¾</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP/1.1</span><br><span class="line">[[ Less interesting headers ... ]]</span><br><span class="line">Content-Type: multipart/form-data; boundary=---------------------------735323031399963166993862150</span><br><span class="line"></span><br><span class="line">-----------------------------735323031399963166993862150</span><br><span class="line">Content-Disposition: form-data; name=&quot;text1&quot;</span><br><span class="line"></span><br><span class="line">text default</span><br><span class="line">-----------------------------735323031399963166993862150</span><br><span class="line">Content-Disposition: form-data; name=&quot;file1&quot;; filename=&quot;a.txt&quot;</span><br><span class="line">Content-Type: text/plain</span><br><span class="line"></span><br><span class="line">Content of a.txt.</span><br><span class="line"></span><br><span class="line">-----------------------------735323031399963166993862150</span><br><span class="line">Content-Disposition: form-data; name=&quot;file2&quot;; filename=&quot;a.html&quot;</span><br><span class="line">Content-Type: text/html</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;&lt;title&gt;Content of a.html.&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">-----------------------------735323031399963166993862150--</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¯¦ç»†å¯ä»¥çœ‹è¿™é‡Œ <a href="https://stackoverflow.com/questions/4526273/what-does-enctype-multipart-form-data-mean/28380690" target="_blank" rel="noopener">What does enctype=â€™multipart/form-dataâ€™ mean?</a></p>
</blockquote>
<h4 id="å†å²æ¼”å˜"><a href="#å†å²æ¼”å˜" class="headerlink" title="å†å²æ¼”å˜"></a>å†å²æ¼”å˜</h4><p>submit form <code>-&gt;</code> XMLHttpRequest form</p>
<h4 id="form-ç›´æ¥-submit"><a href="#form-ç›´æ¥-submit" class="headerlink" title="form ç›´æ¥ submit"></a>form ç›´æ¥ submit</h4><ol>
<li>form æäº¤ä¼šé»˜è®¤è·³è½¬æ–°é¡µé¢, é»˜è®¤ä½¿ç”¨ GET, å¦‚æœç”¨ POST, é‚£ä¹ˆè¯·æ±‚æŠ¥æ–‡ä¸­çš„ content-type é»˜è®¤ä¸º x-www-form-urlencoded</li>
<li>æäº¤éœ€è¦ä½¿ç”¨è®¾ç½®äº† type=â€submitâ€ <code>&lt;input&gt;</code> æˆ– <code>&lt;button&gt;</code> å½“ç„¶ js ä¹Ÿå¯ä»¥</li>
</ol>
<p>è¯¦ç»†æäº¤æ–¹å¼å¯ä»¥çœ‹  - <a href="http://www.anyrt.com/blog/list/submit.html" target="_blank" rel="noopener">formè¡¨å•æäº¤æ–¹å¼</a></p>
<p>å¦å¤–æ’ä»¶ jquery.form.js ä¸è·³è½¬ä¸Šä¼ , åŸç†ä¸º: ajax + å–æ¶ˆé»˜è®¤äº‹ä»¶å¦‚æœä¸æ”¯æŒ XMLHttpRequest 2çº§ä½¿ç”¨ target + iframe</p>
<blockquote>
<p>ç”±äºæ‡’, ä¸æƒ³ç”¨ postman ä¹‹ç±»çš„, ç›´æ¥ç”¨ node æ¥çœ‹è¯·æ±‚æŠ¥æ–‡, ä½¿ç”¨ nodejs ç›‘å¬æºè‡ªæœ¬æœºä¸Šæ‰€æœ‰çš„è®¿é—®æ¬¡ç«¯å£çš„è¯·æ±‚, å¹¶æ‰“å°è¯·æ±‚ä¸­çš„ä¿¡æ¯, åŸæ–‡æ¥è‡ª - <a href="https://stackoverflow.com/questions/5725430/http-test-server-accepting-get-post-requests/52351480" target="_blank" rel="noopener">HTTP test server accepting GET/POST requests</a></p>
</blockquote>
<h4 id="ajax-ä¸Šä¼ "><a href="#ajax-ä¸Šä¼ " class="headerlink" title="ajax ä¸Šä¼ "></a>ajax ä¸Šä¼ </h4><p>åˆ°äº† ajax çš„æ—¶å€™, å¯ä»¥ç”¨ FormData å¯¹è±¡ç®¡ç†è¡¨å•æ•°æ®, FormData ç±»å‹å…¶å®æ˜¯åœ¨ XMLHttpRequest 2çº§å®šä¹‰çš„, å¯ä»¥åˆ©ç”¨ <code>HTMLFormElement</code> å¯¹è±¡åˆå§‹åŒ–æ¥è·å¾—ä¸è¡¨å•ç›¸åŒçš„å€¼, ç›¸æ¯”ä¸€ä¸ªä¸ªè·å–è¡¨å•å€¼å†ä¸Šä¼ æ–¹ä¾¿</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">req.open(<span class="string">'post'</span>, <span class="string">'/uploadUrl'</span>);</span><br><span class="line"><span class="keyword">var</span> test = <span class="keyword">new</span> FormData()</span><br><span class="line">test.append(<span class="string">"k1"</span>, <span class="string">"v1"</span>);</span><br><span class="line">req.send(test); <span class="comment">//è‡ªåŠ¨è®¾ç½® content-type: multipart/form-data</span></span><br><span class="line">req.open(<span class="string">'post'</span>, <span class="string">'/uploadUrl'</span>);</span><br><span class="line">req.send(<span class="number">123</span>) <span class="comment">//text/plain</span></span><br></pre></td></tr></table></figure>

<p><img src="/image/fileupload-4.png" alt="content-type è‡ªåŠ¨è®¾ç½®"></p>
<blockquote>
<p>FormData ä¼šè‡ªåŠ¨åœ¨ä¸Šä¼ çš„æ—¶å€™è®¾ç½® content-type, åŸæ–‡æ¥è‡ª - <a href="https://segmentfault.com/q/1010000018679505#a-1020000018684717" target="_blank" rel="noopener">axiosçš„content-typeæ˜¯è‡ªåŠ¨è®¾ç½®çš„å—ï¼Ÿ</a></p>
</blockquote>
<h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><p>æœ€åæ¥å†™ä¸‹æˆ‘çš„åº”ç”¨:</p>
<blockquote>
<p>åœºæ™¯: æ‰‹æœºä¸Šæœ‰å¾ˆå¤šå¥½çœ‹çš„å›¾ç‰‡, ä½†æ˜¯æˆ‘å¹³æ—¶æ¬£èµå›¾ç‰‡ä¸€èˆ¬æ˜¯ç”µè„‘ä¸Š, æ‰€ä»¥æƒ³æŠŠå›¾ç‰‡ä¼ ä¸Šæ¥<br>æ–¹æ¡ˆ: æ‰‹æœº usb è¿ç”µè„‘, æ‰‹æœºæµè§ˆå™¨ä¸Šä¼ <br>ä¼˜ç¼ºç‚¹åˆ†æ: usb è¿æ¥æ…¢, å¹¶ä¸”å›¾ç‰‡åˆ†æ•£åœ¨ä¸åŒæ–‡ä»¶å¤¹</p>
</blockquote>
<p>åº”è¯¥å¤Ÿæ¸…æ¥šäº†å§, æ¥ä¸‹æ¥è´´ä»£ç å•¦</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//nodeç¯å¢ƒ æ–‡ä»¶å uploadUrl.js</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> querystring = <span class="built_in">require</span>(<span class="string">'querystring'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> portal = <span class="number">8888</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`æœåŠ¡å¼€å§‹,æ‰“å¼€localhost:<span class="subst">$&#123;portal&#125;</span>å³å¯è®¿é—®`</span>);</span><br><span class="line">http</span><br><span class="line">  .createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arg = req.url;</span><br><span class="line">    <span class="keyword">if</span> (arg === <span class="string">'/uploadUrl'</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'ä¸Šä¼ æ–‡ä»¶æœåŠ¡'</span>);</span><br><span class="line">      parseFile(req, res);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fs.readFile(<span class="string">'./test.html'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//è¯»å–å†…å®¹</span></span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        res.writeHead(<span class="number">200</span>, &#123; <span class="string">'Content-Type'</span>: <span class="string">'text/html'</span> &#125;); <span class="comment">//æ³¨æ„è¿™é‡Œ</span></span><br><span class="line">        res.write(data);</span><br><span class="line">        res.end();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .listen(portal);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseFile</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  req.setEncoding(<span class="string">'binary'</span>);</span><br><span class="line">  <span class="keyword">var</span> body = <span class="string">''</span>; <span class="comment">// æ–‡ä»¶æ•°æ®</span></span><br><span class="line">  <span class="keyword">var</span> fileName = <span class="string">''</span>; <span class="comment">// æ–‡ä»¶å</span></span><br><span class="line">  <span class="comment">// è¾¹ç•Œå­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="comment">// console.log(req.headers['content-type'] + '\n\n\n\n\n\n\n');</span></span><br><span class="line">  <span class="keyword">var</span> boundary = req.headers[<span class="string">'content-type'</span>].split(<span class="string">'; '</span>)[<span class="number">1</span>].replace(<span class="string">'boundary='</span>, <span class="string">''</span>);</span><br><span class="line">  req.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> chunk);</span><br><span class="line">    body += chunk;</span><br><span class="line">  &#125;);</span><br><span class="line">  req.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> file = querystring.parse(body, <span class="string">'\r\n'</span>, <span class="string">':'</span>);</span><br><span class="line">    <span class="comment">// console.log(file);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åªå¤„ç†å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (file[<span class="string">'Content-Type'</span>].indexOf(<span class="string">'image'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="comment">//è·å–æ–‡ä»¶å</span></span><br><span class="line">      <span class="keyword">var</span> fileInfo = file[<span class="string">'Content-Disposition'</span>].split(<span class="string">'; '</span>);</span><br><span class="line">      <span class="keyword">for</span> (value <span class="keyword">in</span> fileInfo) &#123;</span><br><span class="line">        <span class="keyword">if</span> (fileInfo[value].indexOf(<span class="string">'filename='</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">          fileName = fileInfo[value].substring(<span class="number">10</span>, fileInfo[value].length - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (fileName.indexOf(<span class="string">'\\'</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">            fileName = fileName.substring(fileName.lastIndexOf(<span class="string">'\\'</span>) + <span class="number">1</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// console.log('æ–‡ä»¶å: ' + fileName);</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è·å–å›¾ç‰‡ç±»å‹(å¦‚ï¼šimage/gif æˆ– image/png))</span></span><br><span class="line">      <span class="keyword">var</span> entireData = body.toString(),</span><br><span class="line">        contentType = file[<span class="string">'Content-Type'</span>].substring(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//è·å–æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®å¼€å§‹ä½ç½®ï¼Œå³contentTypeçš„ç»“å°¾</span></span><br><span class="line">      <span class="keyword">var</span> upperBoundary = entireData.indexOf(contentType) + contentType.length;</span><br><span class="line">      <span class="keyword">var</span> shorterData = entireData.substring(upperBoundary);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ›¿æ¢å¼€å§‹ä½ç½®çš„ç©ºæ ¼</span></span><br><span class="line">      <span class="keyword">var</span> binaryDataAlmost = shorterData.replace(<span class="regexp">/^\s\s*/</span>, <span class="string">''</span>).replace(<span class="regexp">/\s\s*$/</span>, <span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å»é™¤æ•°æ®æœ«å°¾çš„é¢å¤–æ•°æ®ï¼Œå³: "--"+ boundary + "--"</span></span><br><span class="line">      <span class="keyword">var</span> binaryData = binaryDataAlmost.substring(</span><br><span class="line">        <span class="number">0</span>,</span><br><span class="line">        binaryDataAlmost.indexOf(<span class="string">'--'</span> + boundary + <span class="string">'--'</span>)</span><br><span class="line">      );</span><br><span class="line">      <span class="comment">// ä¿å­˜æ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// res.write('&lt;head&gt;&lt;meta charset="utf-8"/&gt;&lt;/head&gt;');</span></span><br><span class="line">      <span class="comment">// res.end('123');</span></span><br><span class="line">      fs.writeFile(<span class="string">'./image/'</span> + fileName, binaryData, <span class="string">'binary'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// res.writeHead(302, &#123;</span></span><br><span class="line">        <span class="comment">//   Location: '/'</span></span><br><span class="line">        <span class="comment">//   //add other headers here...</span></span><br><span class="line">        <span class="comment">// &#125;);</span></span><br><span class="line">        res.writeHead(<span class="number">200</span>); <span class="comment">//åŸæ¥æ²¡å†™endå¯¼è‡´å˜æˆäº†æŒä¹…è¿æ¥</span></span><br><span class="line">        res.end(<span class="string">'123'</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.end(<span class="string">'just pic allowed'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–‡ä»¶å test.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"form"</span> <span class="attr">action</span>=<span class="string">"/uploadUrl"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"upload"</span> <span class="attr">multiple</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"upload"</span> <span class="attr">onclick</span>=<span class="string">"handler(this)"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> files;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> trueForm = <span class="built_in">document</span>.getElementById(<span class="string">'form'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> form = <span class="keyword">new</span> FormData(trueForm);</span></span><br><span class="line"><span class="javascript">        files = form.getAll(<span class="string">'upload'</span>); <span class="comment">//åˆ©ç”¨åªè¯» formdata è·å¾—å…¨éƒ¨æ–‡ä»¶ä¿¡æ¯</span></span></span><br><span class="line">        iterate(0);</span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">iterate</span>(<span class="params">num</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">Promise</span>.all(</span></span><br><span class="line"><span class="javascript">          <span class="comment">//6 çš„åŸå› æ˜¯åŒæ—¶å­˜åœ¨çš„è¿æ¥æœ€å¤§æ•°</span></span></span><br><span class="line">          files.slice(num, num + 6).map(</span><br><span class="line">            (i) =&gt;</span><br><span class="line"><span class="javascript">              <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span></span><br><span class="line">                upload(i, res);</span><br><span class="line"><span class="javascript">              &#125;)<span class="comment">//è¿™é‡Œæ²¡æœ‰å¤§æ‹¬å·, ä¾æ®ç®­å¤´å‡½æ•°æ˜¯ç›´æ¥è¿”å›çš„, æ³¨æ„ Promise.all çš„ä½¿ç”¨</span></span></span><br><span class="line">          )</span><br><span class="line">        )</span><br><span class="line"><span class="javascript">          .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (num &gt;= files.length - <span class="number">6</span>) <span class="keyword">return</span>;</span></span><br><span class="line">            iterate(num + 6);</span><br><span class="line">          &#125;)</span><br><span class="line"><span class="javascript">          .catch(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (num &gt;= files.length - <span class="number">6</span>) <span class="keyword">return</span>;</span></span><br><span class="line">            iterate(num + 6);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">upload</span>(<span class="params">i, res</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> temForm = <span class="keyword">new</span> FormData();</span></span><br><span class="line"><span class="javascript">        temForm.append(<span class="string">'file'</span>, i);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">        req.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (req.status == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">            res(); <span class="comment">// æ›´æ”¹ Promise çŠ¶æ€</span></span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"><span class="javascript">        req.open(<span class="string">'post'</span>, <span class="string">'/uploadUrl'</span>);</span></span><br><span class="line">        req.send(temForm);</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>å‚è€ƒæ–‡ç« </strong>:</p>
<ul>
<li><a href="https://nodejs.org/zh-cn/docs/guides/anatomy-of-an-http-transaction/" target="_blank" rel="noopener">ä¸€æ¬¡ HTTP ä¼ è¾“è§£æ</a></li>
<li><a href="https://juejin.im/post/5da14778f265da5bb628e590#heading-7" target="_blank" rel="noopener">å†™ç»™æ–°æ‰‹å‰ç«¯çš„å„ç§æ–‡ä»¶ä¸Šä¼ æ”»ç•¥ï¼Œä»å°å›¾ç‰‡åˆ°å¤§æ–‡ä»¶æ–­ç‚¹ç»­ä¼ </a></li>
<li><a href="https://learnku.com/articles/25881" target="_blank" rel="noopener">99%çš„äººéƒ½ç†è§£é”™äº† HTTP ä¸­ GET ä¸ POST çš„åŒºåˆ«</a></li>
</ul>
</div>
          <hr>
        </div>
        <div class="recent-post-item article-container"><a class="article-title" href="/2019/10/20/promise-await-yield/">promise-await-yield å¼‚æ­¥ä¸‰è¿</a>
          <time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-20
          </time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/js/">js</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Javascript/">Javascript</a></span>
          <div class="content"><p>JavaScript ä¸­ä½¿ç”¨å¼‚æ­¥çš„æƒ…å†µéå¸¸å¤š, å› ä¸º js é‡‡å–å•çº¿ç¨‹, å¦‚æœæŸæ®µä»£ç å¤„ç†æ—¶é—´è¿‡é•¿, åé¢çš„ä»£ç å°†ä¸€ç›´ç­‰å¾…å…¶æ‰§è¡Œå®Œæ¯•ã€‚<br>ç”±æ­¤äº§ç”Ÿçš„å¤„ç†æ–¹æ¡ˆæ˜¯, ä»»åŠ¡é˜Ÿåˆ—ä¸äº‹ä»¶å¾ªç¯(event loop), æ— è®ºæ˜¯æœ€åˆçš„å›è°ƒå‡½æ•°(å¹¶éåªç”¨åœ¨å¼‚æ­¥), è¿˜æ˜¯åé¢è§£å†³ callback hell è€Œå‡ºç°çš„ promise ç­‰, éƒ½æ˜¯ä¾é åœ¨è¿™ä¸ªæœºåˆ¶ä¸Šçš„ã€‚</p>
<blockquote>
<p>ä¸»çº¿ç¨‹é‡åˆ°å¼‚æ­¥å‡½æ•°æ—¶, å°†å…¶æ‰”ç»™å¼‚æ­¥æ¨¡å—, ç»§ç»­æ‰§è¡Œä¸»çº¿ç¨‹ä¸­å‰©ä¸‹çš„éƒ¨åˆ†, å½“å¼‚æ­¥å‡½æ•°æ»¡è¶³äº†æ‰§è¡Œè¦æ±‚æ—¶, å°†å›è°ƒå‡½æ•°æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­, ä¸»çº¿ç¨‹å®Œæˆå, æ‰ä¼šä»ä»»åŠ¡é˜Ÿåˆ—ä¸­é€‰æ‹©ä»»åŠ¡æ‰§è¡Œ, è€Œ event loop è´Ÿè´£çš„æ˜¯ä¸æ–­ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–ä»£ç , è¯¦ç»†è¯·çœ‹ - <a href="https://segmentfault.com/a/1190000011198232" target="_blank" rel="noopener">JavaScript å¼‚æ­¥ã€æ ˆã€äº‹ä»¶å¾ªç¯ã€ä»»åŠ¡é˜Ÿåˆ—</a></p>
</blockquote>
<h3 id="å†å²æ¼”å˜æƒ…å†µ"><a href="#å†å²æ¼”å˜æƒ…å†µ" class="headerlink" title="å†å²æ¼”å˜æƒ…å†µ"></a>å†å²æ¼”å˜æƒ…å†µ</h3><p>æ˜“åµŒå¥—çš„ callback <code>-&gt;</code> promise <code>-&gt;</code> åŒ…è£… promise çš„ generator <code>-&gt;</code> generator çš„è¯­æ³•ç³– await</p>
<h3 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h3><h4 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h4><blockquote>
<p>JSé‡Œä¸€ä¸ªpromiseå¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§åŸºæœ¬çŠ¶æ€ï¼š<br>1.<code>nothing happened yet</code><br>2.<code>&quot;locked in&quot; to another promise</code><br>3.<code>fulfilled</code><br>4.<code>rejected</code><br>å…¶ä¸­{1,2}ä¸º<code>pending</code>ï¼Œ{3,4}ä¸º<code>settled</code>ï¼Œ{2,3,4}ä¸º<code>resolved</code>ï¼Œ{1}ä¸º<code>unresolved</code>ã€‚è¯¦ç»†å¯ä»¥çœ‹ <a href="https://www.zhihu.com/question/34445479" target="_blank" rel="noopener">Promiseçš„fulfillå’Œresolve</a></p>
</blockquote>
<p>Promise å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆ (æˆ–å¤±è´¥), åŠå…¶ç»“æœå€¼ã€‚Promise çš„å‚æ•° executor å‡½æ•°åœ¨ Promise æ„é€ å‡½æ•°è¿”å›æ‰€å»º Promise å®ä¾‹å¯¹è±¡å‰è¢«è°ƒç”¨, å½“å¼‚æ­¥æˆåŠŸå®Œæˆå¹¶è°ƒç”¨ resolve å‡½æ•°æ—¶, å°†ä¼šå°† Promise çš„çŠ¶æ€ <code>[[PromiseState]]</code> æ›´æ”¹ä¸º fulfilled (chrome ä¸­æ˜¯ resolved), å¦‚æœæ²¡æœ‰è°ƒç”¨ resolve å°†ä¸€ç›´æ˜¯ pending çŠ¶æ€<br><img src="/image/Promise-1.png" alt="Promise çŠ¶æ€"><br><strong>ç»“æœå€¼</strong> æ˜¯ Promise <a href="https://stackoverflow.com/questions/33075262/what-is-an-internal-slot-of-an-object-in-javascript" target="_blank" rel="noopener">å†…ç½®ä¼ªå±æ€§ internal slots</a> <code>[[PromiseValue]]</code> (chrome devtool å°†å®ƒæš´éœ²å‡ºæ¥äº†), å®ƒå°†ä½œä¸ºå‚æ•°ä¼ å…¥ ä¹‹å <code>then</code> çš„å‚æ•° onFulfilled æˆ– onRejected ä¸­</p>
<h4 id="åŸºç¡€ä½¿ç”¨"><a href="#åŸºç¡€ä½¿ç”¨" class="headerlink" title="åŸºç¡€ä½¿ç”¨"></a>åŸºç¡€ä½¿ç”¨</h4><p>ä¸‹æ–¹æ–°æ„å»ºä¸€ä¸ª Promise çš„å¯¹è±¡, å½“æ‰§è¡Œåˆ° resolve æ—¶, å°† <code>[[PromiseState]]</code> æ”¹ä¸º fulfilled, å½“ Promise å˜æˆæ¥å—çŠ¶æ€(fulfilled)æ—¶è°ƒç”¨ <code>then</code> ä¸­çš„ onFulfilledã€‚onFulfilled æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³æ¥å—çš„æœ€ç»ˆç»“æœ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        resolve(<span class="number">123</span>);</span><br><span class="line">    &#125;, <span class="number">50</span>);</span><br><span class="line">&#125;);</span><br><span class="line">p.<span class="string">`then`</span>(<span class="function">(<span class="params">data</span>)=&gt;</span><span class="built_in">console</span>.log(data))</span><br><span class="line"><span class="built_in">console</span>.log(p)</span><br></pre></td></tr></table></figure>

<h4 id="then-é“¾"><a href="#then-é“¾" class="headerlink" title="then é“¾"></a><code>then</code> é“¾</h4><p>æ¯æ¬¡è°ƒç”¨ <code>then</code> åéƒ½ä¼šè¿”å›ä¸€ä¸ª promise å¯¹è±¡, è¿”å›çš„æƒ…å†µç”± <code>then</code> ä¸­çš„å›è°ƒå†³å®š, æè¿°ä¸€äº›å¸¸ç”¨çš„æƒ…å†µ</p>
<ol>
<li>è¿”å›äº†ä¸€ä¸ªå€¼, é‚£ä¹ˆ <code>then</code> è¿”å›çš„ Promise å°†ä¼šæ˜¯ fulfilled å¹¶ä¸”å°†è¿”å›çš„å€¼ä½œä¸ºä¸‹ä¸€ä¸ª <code>then</code> çš„ onFulfilled çš„å‚æ•°</li>
<li>è¿”å›ä¸€ä¸ªæœªå®šçŠ¶æ€(pending)çš„ Promiseï¼Œé‚£ä¹ˆ <code>then</code> è¿”å› Promise çš„çŠ¶æ€ä¹Ÿæ˜¯æœªå®šçš„, å¹¶ä¸”çŠ¶æ€ä¸è¯¥ Promise ä¿æŒä¸€è‡´, å¹¶ä¾æ®è¯¥ Promise ä¸­çš„ resolve å’Œ reject æ¥ä½¿ç”¨ä¸‹ä¸€ä¸ª <code>then</code> çš„ä¸¤ä¸ªå‚æ•°<blockquote>
<p>è¯¦ç»†æƒ…å†µè¯·çœ‹ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" target="_blank" rel="noopener">Promise.prototype.then()</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">123</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line">p.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'456'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res) <span class="comment">//æ‰“å° 456</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="ç®€å•-Promise-å®ç°"><a href="#ç®€å•-Promise-å®ç°" class="headerlink" title="ç®€å• Promise å®ç°"></a>ç®€å• Promise å®ç°</h4><p>å½“ç„¶è¿™éƒ½æ˜¯å£å¤´ä¸Šçš„æ‰§è¡Œæµç¨‹, ç°åœ¨æ¥å†™ä¸€ä¸ªçœ‹çœ‹</p>
<ol>
<li><p>ç»“æ„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">promise</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>()&#123;&#125;</span><br><span class="line">  then()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ„é€ å‡½æ•°</p>
<blockquote>
<p>!!!! å¦‚æœä¸å°† then ä¸­çš„ onFulfilled å‡½æ•°ä½¿ç”¨setTimeout æ¨è¿Ÿåˆ°ä¸‹ä¸ªäº‹ä»¶å¾ªç¯å†æ‰§è¡Œ, æ‰§è¡Œé¡ºåºä¼šä¸åŸç”ŸPromiseä¸åŒ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(executor)&#123;</span><br><span class="line">  <span class="comment">//åˆå§‹çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">this</span>._states = <span class="string">'pending'</span>;</span><br><span class="line">  <span class="keyword">this</span>._internalValue = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="comment">// æ·»åŠ å›è°ƒå‡½æ•°é˜Ÿåˆ—</span></span><br><span class="line">  <span class="keyword">this</span>._chain = []</span><br><span class="line">  <span class="keyword">const</span> resolve = <span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>._states = <span class="string">'fulfilled'</span>;</span><br><span class="line">    <span class="keyword">this</span>._internalValue = res;</span><br><span class="line">    <span class="comment">//å¦‚æœæ­¤æ—¶å·²ç»æœ‰ then è¢«è°ƒç”¨äº†</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> &#123;onFulfilled&#125; <span class="keyword">of</span> <span class="keyword">this</span>._chain)&#123;</span><br><span class="line">      <span class="comment">//å¯¹è±¡ç»“æ„èµ‹å€¼, chain ä¸­å…ƒç´ éƒ½æ˜¯å¯¹è±¡</span></span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> onFulfilled(res), <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> reject = <span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>._states = <span class="string">'rejected'</span>;</span><br><span class="line">    <span class="keyword">this</span>._internalValue = err;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> &#123;onRejected&#125; <span class="keyword">of</span> <span class="keyword">this</span>._chain)&#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> onRejected(res), <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  executor(resolve, reject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>then å‡½æ•°ç¼–å†™</p>
<blockquote>
<p>å¦‚æœå·²ç» settled é‚£å°±æ‰§è¡Œ, å¦åˆ™åŠ å…¥æ‰§è¡Œé˜Ÿåˆ—</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">then(onFulfilled, onRejected) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._states === <span class="string">'fulfilled'</span>) &#123;</span><br><span class="line">        onFulfilled(<span class="keyword">this</span>._internalValue)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>._state === <span class="string">'rejected'</span>) &#123;</span><br><span class="line">        onRejected(<span class="keyword">this</span>._internalValue)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>._chain.push(&#123; onFulfilled, onRejected &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Promise è°ƒç”¨é“¾</p>
<blockquote>
<p><code>then()</code> åº”è¯¥è¿”å›ä¸€ä¸ªæ–° Promise</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">then(onFulfilled, onRejected) &#123;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> promise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ç¡®ä¿åœ¨ onFulfilled() å’Œ onRejected() çš„é”™è¯¯å°†å¯¼è‡´è¿”å›çš„ promise å¤±è´¥ï¼ˆreject)</span></span><br><span class="line">    <span class="keyword">const</span> _onFulfilled = <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve(onFulfilled(res));</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> _onRejected = <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      reject(onRejected(err));</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">console</span>.log(self === <span class="keyword">this</span>) <span class="comment">//ã€‚ã€‚ã€‚ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._state === <span class="string">'fulfilled'</span>) &#123;</span><br><span class="line">      _onFulfilled(<span class="keyword">this</span>._internalValue);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>._state === <span class="string">'rejected'</span>) &#123;</span><br><span class="line">      _onRejected(<span class="keyword">this</span>._internalValue);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>._chian.push(&#123; <span class="attr">onFulfilled</span>: _onFulfilled, <span class="attr">onRejected</span>: _onRejected &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p><code>onFulfilled()</code> è¿”å› Promise çš„è¯</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resolve = <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._state !== <span class="string">'pending'</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœ res æ˜¯ thenableï¼ˆå¸¦æœ‰thenæ–¹æ³•çš„å¯¹è±¡, å¦‚ Promiseï¼‰</span></span><br><span class="line">    <span class="comment">// å¿…é¡»åˆ¤æ–­ res ä¸æ˜¯null æˆ– undefined å¦åˆ™è·³åˆ° reject å»å¤„ç†äº†</span></span><br><span class="line">    <span class="keyword">if</span> (res&amp;&amp;<span class="keyword">typeof</span> res.then === <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.then(resolve, reject)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>._state = <span class="string">'fulfilled'</span></span><br><span class="line">    <span class="keyword">this</span>._internalValue = res</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> &#123; onFulfilled &#125; <span class="keyword">of</span> <span class="keyword">this</span>._chain) &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> onFulfilled(res), <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>!!!! å»ºè®®å†™ä¸€æ®µä»£ç , åœ¨è„‘æµ·ä¸­è¿è¡Œä¸€é, debug ä¹Ÿå¯ä»¥, å®åœ¨ä¸è¡Œçº¸ä¸Šå†™ä¸€éæµç¨‹(æœ€ä½³æ–¹æ¡ˆ), è¿™ç©æ„è°ƒç”¨æ¥è°ƒç”¨å», è„‘è¢‹éƒ½ç»•æ™•äº†, å¯ä»¥åœ¨ä¸‹æ–¹çœ‹çœ‹æµ‹è¯•å¯¹æ¯”, è¾“å‡ºå¯ä»¥ç‚¹å‡»ç½‘ç«™å·¦ä¸‹è§’çš„ console æŒ‰é’®çœ‹åˆ°</p>
</blockquote>
<iframe height="265" style="width: 100%;" scrolling="no" title="Promise å®ç°" src="https://codepen.io/luckyray-fan/embed/vYYZRzN?height=265&theme-id=dark&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/luckyray-fan/pen/vYYZRzN" target="_blank" rel="noopener">Promise å®ç°</a> by å‰å…‰
  (<a href="https://codepen.io/luckyray-fan" target="_blank" rel="noopener">@luckyray-fan</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.
</iframe>
### generator (å¯èƒ½æ­åœ¨awaité‡Œ)
### await (å¾…å†™-æ°´å¹³è¿˜è¦å†é«˜ç‚¹, Promise å°±å¤ŸåƒåŠ›äº†, è‚¯å®šä¼šè¡¥çš„)

<p><strong>å‚è€ƒæ–‡ç« </strong>:<br><a href="https://thecodebarbarian.com/write-your-own-node-js-promise-library-from-scratch.html" target="_blank" rel="noopener">Write Your Own Node.js Promise Library from Scratch</a></p>
<blockquote>
<ul>
<li>å¯¹åº”ä¸­æ–‡ç‰ˆ <a href="https://zhuanlan.zhihu.com/p/35697919" target="_blank" rel="noopener">ä»é›¶å¼€å§‹å†™ä¸€ä¸ª Promise åº“</a></li>
<li>å®ç°è¿›é˜¶ç‰ˆ <a href="https://zhuanlan.zhihu.com/p/21834559" target="_blank" rel="noopener">å²ä¸Šæœ€æ˜“è¯»æ‡‚çš„ Promise/A+ å®Œå…¨å®ç°</a></li>
</ul>
</blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">Promise</a></p>
</div>
          <hr>
        </div>
        <div class="recent-post-item article-container"><a class="article-title" href="/2019/10/11/software-development-mode/">è½¯ä»¶å¼€å‘ è®¾è®¡æ¨¡å¼</a>
          <time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-11
          </time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/è®¡ç®—æœºç§‘å­¦/">è®¡ç®—æœºç§‘å­¦</a></span>
          <div class="content"><h3 id="çº²è¦"><a href="#çº²è¦" class="headerlink" title="çº²è¦"></a>çº²è¦</h3><ol>
<li>éƒ¨åˆ†è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¼¥è¡¥é™æ€ç±»å‹ä¸­éš¾ä»¥å®ç°æŸäº›ä»£ç (åŠŸèƒ½å¤ç”¨)è€Œå­˜åœ¨çš„</li>
<li>åŠ¨æ€ç±»å‹è¯­è¨€å¾ˆå¤§éƒ¨åˆ†ä¸éœ€è¦</li>
<li>è®¾è®¡æ¨¡å¼æ˜¯å°†è¾¾æˆè½¯ä»¶å¤ç”¨ç­‰éœ€æ±‚çš„æƒ¯ç”¨æ³•æŠ½è±¡è€Œæˆçš„</li>
<li>æœ‰æ€»ç»“è®¾è®¡æ¨¡å¼çš„å¥—è·¯</li>
</ol>
<p>é‚£ä¹ˆ, ä¸ºä»€ä¹ˆåŠ¨æ€ç±»å‹ä¼šä¸éœ€è¦è¿™äº›è®¾è®¡æ¨¡å¼:</p>
<h3 id="æ”¶é›†æ€»ç»“"><a href="#æ”¶é›†æ€»ç»“" class="headerlink" title="æ”¶é›†æ€»ç»“"></a>æ”¶é›†æ€»ç»“</h3><h4 id="åŒ…è£…"><a href="#åŒ…è£…" class="headerlink" title="åŒ…è£…"></a>åŒ…è£…</h4><p>å°†æŸä¸ªæ ¸å¿ƒæ–¹æ³•è¿›è¡ŒåŒ…è£…, å®ç°å¤šä¸ªåŠŸèƒ½</p>
</div>
          <hr>
        </div>
        <div class="recent-post-item article-container"><a class="article-title" href="/2019/10/08/jquery-study-plugin/">jquery å­¦ä¹ æ€è€ƒ-æ‰©å±•</a>
          <time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-08
          </time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/æºç åˆ†æ/">æºç åˆ†æ</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/javascript/">javascript</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/jquery/">jquery</a></span>
          <div class="content"><p>éœ€æ±‚, èƒ½å¤Ÿé€‰ä¸­æ—¥æœŸç„¶åè¿”å›å­—æ®µã€‚å¦å¤–, è®¾è®¡é¡µé¢æ—¶éµå¾ª:</p>
<ol>
<li>åŸºç¡€äº‹ä»¶æ‰€éœ€è¦çš„ç•Œé¢</li>
<li>è‡ªå·±ä½œä¸ºç”¨æˆ·ç¡®è®¤æ˜¯å¦ç»§ç»­æ·»åŠ äº¤äº’</li>
<li>æ ¹æ® 2 å›åˆ° 1 æˆ–ç»“æŸ<h3 id="date-picker-æ¥æº"><a href="#date-picker-æ¥æº" class="headerlink" title="date picker æ¥æº"></a>date picker æ¥æº</h3>æ¥æºæ˜¯<a href="https://www.jqueryscript.net/demo/Pretty-Event-Calendar-&-Datepicker-Plugin-For-jQuery-Calendar-js/" target="_blank" rel="noopener">è¿™ä¸ªç½‘ç«™</a></li>
</ol>
<h3 id="ç•Œé¢æ„å»ºé˜¶æ®µ"><a href="#ç•Œé¢æ„å»ºé˜¶æ®µ" class="headerlink" title="ç•Œé¢æ„å»ºé˜¶æ®µ"></a>ç•Œé¢æ„å»ºé˜¶æ®µ</h3><p>é¦–å…ˆå…ˆå†™å¥½ç•Œé¢, ç„¶åä¿è¯ç»“æ„ä¸å˜æ·»åŠ äº‹ä»¶, å†ä¾æ¬¡å®Œå–„äº‹ä»¶ç•Œé¢<br>å®Œæˆç•Œé¢, å®Œå®Œæ•´æ•´æ ¹æ®è®¾è®¡å›¾æ¥å°±è¡Œ</p>
<blockquote>
<p>ä¸ºäº†çœäº‹å¤§éƒ¨åˆ†cssä¸åŸç½‘å€ä¸€è‡´, æ³¨æ„æ­¤é˜¶æ®µå†™æ­»äº†å‚æ•°, åé¢jsåŠ¨æ€ç”Ÿæˆæ—¶ä¼šæ›´æ”¹</p>
</blockquote>
<h4 id="input-è¾“å…¥æ¡†"><a href="#input-è¾“å…¥æ¡†" class="headerlink" title="input è¾“å…¥æ¡†"></a>input è¾“å…¥æ¡†</h4><p>ç”¨æœ€å¸¸è§çš„æ ·å¼, è¿™æ˜¯åœ¨<a href="https://codepen.io/andreasstorm/pen/gKGbxo" target="_blank" rel="noopener">ç½‘ä¸Šæ‰¾åˆ°çš„</a>, å…¶åŠ¨æ€æ•ˆæœçš„è§¦å‘ä¸º :placeholder-shown, hover, focus ,å±æ€§ä¸º transform ä¸­çš„ translate, scale, transform-originã€‚æ§åˆ¶ä¸º transition<br>è§¦å‘å«ä¹‰: placeholder(å ä½ç¬¦)æ˜¯å¦å±•ç¤ºã€‚<br>å±æ€§å«ä¹‰: ç§»åŠ¨, ç¼©æ”¾, åŠ¨ç”»æ•ˆæœèµ·å§‹ç‚¹ã€‚<br><img src="/image/jQuery-5.png" alt="inputè¾“å…¥æ¡†"></p>
<blockquote>
<p>åŸç½‘å€ç”¨çš„ <a href="http://stylus-lang.com/" target="_blank" rel="noopener">stylus</a> cssé¢„å¤„ç†å™¨, å¯ä»¥é€šè¿‡cssæ¡†çš„å³ä¸Šè§’çš„ç®­å¤´ é€‰æ‹© view compiled css çœ‹å¤„ç†åçš„ css</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">      #inp &#123;</span><br><span class="line">        cursor: pointer;</span><br><span class="line">        width: 100%;</span><br><span class="line">        border: 0;</span><br><span class="line">        padding: 12px 0;</span><br><span class="line">        height: 48px;</span><br><span class="line">        font-size: 18px;</span><br><span class="line">        font-weight: 500;</span><br><span class="line">        border-bottom: 2px solid #c8ccd4;</span><br><span class="line">        border-radius: 0;</span><br><span class="line">        color: #223254;</span><br><span class="line">        transition: all 0.15s ease;</span><br><span class="line">      &#125;</span><br><span class="line">      #inp:hover &#123;</span><br><span class="line">        background: rgba(34, 50, 84, 0.03);</span><br><span class="line">      &#125;</span><br><span class="line">      #inp:not(:placeholder-shown) + span &#123;</span><br><span class="line">        color: #5a667f;</span><br><span class="line">        transform: translateY(-26px) scale(0.75);</span><br><span class="line">      &#125;</span><br><span class="line">      #inp:focus &#123;</span><br><span class="line">        background: none;</span><br><span class="line">        outline: none;</span><br><span class="line">      &#125;</span><br><span class="line">      #inp:focus + span &#123;</span><br><span class="line">        color: #07f;</span><br><span class="line">        transform: translateY(-26px) scale(0.75);</span><br><span class="line">      &#125;</span><br><span class="line">      #inp:focus + span + .border &#123;</span><br><span class="line">        transform: scaleX(1);</span><br><span class="line">      &#125;</span><br><span class="line">      .inp &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        top: 50px;</span><br><span class="line">        margin: auto;</span><br><span class="line">        width: 100%;</span><br><span class="line">        max-width: 280px;</span><br><span class="line">        display: block;</span><br><span class="line">      &#125;</span><br><span class="line">      .inp * &#123;</span><br><span class="line">        box-sizing: border-box;</span><br><span class="line">      &#125;</span><br><span class="line">      .label &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 16px;</span><br><span class="line">        left: 0;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        color: #9098a9;</span><br><span class="line">        font-weight: 500;</span><br><span class="line">        transform-origin: 0 0;</span><br><span class="line">        transition: all 0.2s ease;</span><br><span class="line">      &#125;</span><br><span class="line">      .border &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        bottom: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        height: 2px;</span><br><span class="line">        width: 100%;</span><br><span class="line">        background: #0077ff;</span><br><span class="line">        transform: scaleX(0);</span><br><span class="line">        transform-origin: 0 0;</span><br><span class="line">        transition: all 0.15s ease;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"inp"</span> <span class="attr">class</span>=<span class="string">"inp"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"inp"</span> <span class="attr">placeholder</span>=<span class="string">"&amp;nbsp;"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"border"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="å¤´éƒ¨"><a href="#å¤´éƒ¨" class="headerlink" title="å¤´éƒ¨"></a>å¤´éƒ¨</h4><p>å¸ƒå±€ç”¨çš„float, å‘¨å›´çš„ç©ºç™½ç”¨çš„ padding, text-indentæ§åˆ¶ã€‚<br><img src="/image/jQuery-6.png" alt></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">data</span>=<span class="string">"wrapèƒŒæ™¯é˜´å½±"</span>&gt;</span></span><br><span class="line">      .wrap &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        background: #fdfdfd;</span><br><span class="line">        border: 1px solid #e8e8e8;</span><br><span class="line">        box-shadow: 1px 2px 3px #ddd;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">data</span>=<span class="string">"hdå¹´æœˆä»½"</span>&gt;</span></span><br><span class="line">      .hd &#123;</span><br><span class="line">        padding: 10px 0;</span><br><span class="line">        height: 30px;</span><br><span class="line">        line-height: 30px;</span><br><span class="line">      &#125;</span><br><span class="line">      .date-year &#123;</span><br><span class="line">        font-size: 28px;</span><br><span class="line">        text-indent: 10px;</span><br><span class="line">        text-decoration: none;</span><br><span class="line">        float: left;</span><br><span class="line">      &#125;</span><br><span class="line">      .year &#123;</span><br><span class="line">        color: #ddd;</span><br><span class="line">      &#125;</span><br><span class="line">      .m &#123;</span><br><span class="line">        color: #888;</span><br><span class="line">        margin-left: -5px;</span><br><span class="line">      &#125;</span><br><span class="line">      .arrow &#123;</span><br><span class="line">        width: 50px;</span><br><span class="line">        margin-right: 10px;</span><br><span class="line">        float: right;</span><br><span class="line">        font: 500 26px sans-serif;</span><br><span class="line">        color: #ddd;</span><br><span class="line">      &#125;</span><br><span class="line">      .prev &#123;</span><br><span class="line">        cursor: pointer;</span><br><span class="line">        float: left;</span><br><span class="line">      &#125;</span><br><span class="line">      .next &#123;</span><br><span class="line">        cursor: pointer;</span><br><span class="line">        float: right;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap"</span> <span class="attr">style</span>=<span class="string">"width: 280px;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"date"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hd"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"date-year"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"year"</span>&gt;</span>2019/<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"m"</span>&gt;</span>10<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"arrow"</span>&gt;</span></span><br><span class="line">              &lt;span class="prev"&gt;&lt;&lt;/span&gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"next"</span>&gt;</span>&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ct"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"month"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ä¸»ä½“"><a href="#ä¸»ä½“" class="headerlink" title="ä¸»ä½“"></a>ä¸»ä½“</h4><p>æ³¨æ„æ‹¥æœ‰floatå±æ€§çš„å…ƒç´ çš„çˆ¶å…ƒç´ éœ€è¦åŠ ä¸ªå®½åº¦<br><img src="/image/jquery-7.png" alt="date picker ä¸»ä½“"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">data</span>=<span class="string">"ctä¸»ä½“"</span>&gt;</span></span><br><span class="line">      .week &#123;</span><br><span class="line">        color: #888;</span><br><span class="line">      &#125;</span><br><span class="line">      ul,</span><br><span class="line">      ol,</span><br><span class="line">      li &#123;</span><br><span class="line">        list-style: none;</span><br><span class="line">        padding: 0;</span><br><span class="line">        margin: 0;</span><br><span class="line">      &#125;</span><br><span class="line">      html &#123;</span><br><span class="line">        font: 500 14px 'roboto';</span><br><span class="line">        color: #333;</span><br><span class="line">      &#125;</span><br><span class="line">      .wrap li &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        float: left;</span><br><span class="line">        text-align: center;</span><br><span class="line">        border-radius: 50%;</span><br><span class="line">        width: 40px;</span><br><span class="line">        height: 40px;</span><br><span class="line">        line-height: 40px;</span><br><span class="line">      &#125;</span><br><span class="line">      .items &gt; li &#123;</span><br><span class="line">        width: 280px;</span><br><span class="line">      &#125;</span><br><span class="line">      .old &#123;</span><br><span class="line">        color: #888;</span><br><span class="line">      &#125;</span><br><span class="line">      .now &#123;</span><br><span class="line">        color: #fff;</span><br><span class="line">        background: #66be8c !important;</span><br><span class="line">      &#125;</span><br><span class="line">      .new &#123;</span><br><span class="line">        color: #888;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"date"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hd"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"date-year"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"year"</span>&gt;</span>2019/<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"m"</span>&gt;</span>10<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"arrow"</span>&gt;</span></span><br><span class="line">              &lt;span class="prev"&gt;&lt;&lt;/span&gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"next"</span>&gt;</span>&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ct"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"week"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span>Sun<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span>Mon<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span>Tue<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span>Wed<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span>Thu<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span>Fri<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span>Sat<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"items"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"days"</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"old"</span>&gt;</span>29<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"old"</span>&gt;</span>30<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>8<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>9<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>10<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>11<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>12<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>13<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">" now"</span>&gt;</span>14<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>15<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>16<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>17<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>18<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>19<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>20<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>21<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>22<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>23<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>24<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>25<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>26<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>27<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>28<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>29<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>30<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>31<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"new"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"new"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"new"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"new"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"new"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"new"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"new"</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"new"</span>&gt;</span>8<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"new"</span>&gt;</span>9<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"month"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="äº¤äº’äº‹ä»¶é˜¶æ®µ"><a href="#äº¤äº’äº‹ä»¶é˜¶æ®µ" class="headerlink" title="äº¤äº’äº‹ä»¶é˜¶æ®µ"></a>äº¤äº’äº‹ä»¶é˜¶æ®µ</h3><p>####</p>
<h3 id="æ’ä»¶æ”¹å†™é˜¶æ®µ"><a href="#æ’ä»¶æ”¹å†™é˜¶æ®µ" class="headerlink" title="æ’ä»¶æ”¹å†™é˜¶æ®µ"></a>æ’ä»¶æ”¹å†™é˜¶æ®µ</h3><h4 id="css-å‘½åç©ºé—´"><a href="#css-å‘½åç©ºé—´" class="headerlink" title="css å‘½åç©ºé—´"></a>css å‘½åç©ºé—´</h4><p>æ²¡æœ‰é‡‡ç”¨å‰ç¼€é™åˆ¶, å¥½å¥‡css moduleé‡Œçš„ç±»å, æ‰€ä»¥ç©ç©, æ¢ç´¢ä¸€ä¸‹ã€‚ä¸€æ¿€çµ, å†™æˆäº†ç”¨webpackæ‰“åŒ…çš„æ ·å­, è™½ç„¶è¿˜æ˜¯èƒ½å°†ç”Ÿæˆçš„main.jså¼•å…¥htmlæ¥è¾¾åˆ°æƒ³è¦çš„æ•ˆæœ, ä½†æ˜¯è¿™å·²ç»å’Œjquery æ²¡å…³ç³»äº†, æ‰€ä»¥è¿˜æ˜¯å›åˆ°æ­£é“ä¸Šå§</p>
</div>
          <hr>
        </div>
        <div class="recent-post-item article-container"><a class="article-title" href="/2019/10/06/jquery-study/">jquery å­¦ä¹ æ€è€ƒ</a>
          <time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-06
          </time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/æºç åˆ†æ/">æºç åˆ†æ</a></span>
          <div class="content"><p>è§è¯†è¿‡ä¸å°‘ä¸œè¥¿, ä¹Ÿå†™è¿‡ä¸€äº›ä¸œè¥¿åã€‚å¼€å§‹å­¦ä¹ åˆ«äººçš„å†™æ³•, ä»æœ€ä½³å®è·µ, ä»£ç ç»„ç»‡, åˆ°è¯­è¨€ç‰¹æ€§, è®¾è®¡æ¨¡å¼ã€‚</p>
<p>å…³äºå­¦ä¹ åˆ«äºº,</p>
<blockquote>
<ol>
<li>åˆ†æç»“æ„, ç¼–å†™ç®€æ˜“ç‰ˆæœ¬(æ„å»ºéª¨æ¶æ¨¡æ‹Ÿæ“ä½œ, å‰©ä¸‹çš„åªéœ€è¦æ·»åŠ åŠŸèƒ½å®Œå–„)</li>
<li>äº†è§£å·¥ä½œæµ, æ‰©å±•å¢å¼ºå®ƒ</li>
</ol>
</blockquote>
<h3 id="åŸºç¡€ç»“æ„"><a href="#åŸºç¡€ç»“æ„" class="headerlink" title="åŸºç¡€ç»“æ„"></a>åŸºç¡€ç»“æ„</h3><blockquote>
<p>è¿™éƒ¨åˆ†å¼•ç”¨çš„æ˜¯ jQuery åœ¨ <a href="https://github.com/jquery/jquery" target="_blank" rel="noopener">github</a> ä¸Šçš„ä»“åº“,ä½¿ç”¨çš„æ¨¡å—ç®¡ç†æ˜¯ requirejs (ä¸ nodejs ä¸­çš„ require ä¸æ˜¯ä¸€ä¸ªè§„èŒƒ) ä¸‹é¢çš„é“¾æ¥æ˜¯å¤§æ¦‚ä½ç½®, é¡ºåºå¤§æ¦‚æ˜¯æ‰“åŒ…åçš„ã€‚å¦‚æœæƒ³æœç´¢ç›¸å…³çš„ä»£ç , å¯ä»¥åˆ©ç”¨ github çš„ä»“åº“å†…å¯»æ‰¾, èƒ½æŸ¥æ‰¾æ–‡ä»¶å†…å®¹, å¾ˆæ–¹ä¾¿</p>
<ol>
<li><a href="https://github.com/jquery/jquery/blob/master/src/wrapper.js" target="_blank" rel="noopener">ç«‹å³æ‰§è¡Œå‡½æ•° , æ„å»ºjQueryåŒæ—¶å…¼å®¹nodeç¯å¢ƒ</a></li>
<li><a href="https://github.com/jquery/jquery/tree/master/src/var" target="_blank" rel="noopener">å…¨å±€é€šç”¨å˜é‡ä¸å‡½æ•° , æ–¹ä¾¿ä½¿ç”¨</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/core/init.js" target="_blank" rel="noopener">initå‡½æ•° , åŸå‹é“¾</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/core.js#L126" target="_blank" rel="noopener">extend , ä¸ºjQueryæ·»åŠ æ–°å‡½æ•°</a></li>
<li><a href="https://github.com/jquery/sizzle" target="_blank" rel="noopener">sizzle å‡½æ•°</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/callbacks.js#L40" target="_blank" rel="noopener">callbacks å‡½æ•°</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/deferred.js" target="_blank" rel="noopener">Deferred promise</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/data.js" target="_blank" rel="noopener">Data æ•°æ®ç¼“å­˜</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/queue.js" target="_blank" rel="noopener">queue é˜Ÿåˆ—æ“ä½œ: æ‰§è¡Œé¡ºåº</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/attributes.js" target="_blank" rel="noopener">attr å…ƒç´ å±æ€§æ“ä½œ</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/css.js" target="_blank" rel="noopener">CSS æ“ä½œ</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/event.js#L816" target="_blank" rel="noopener">event æ“ä½œ, on ä¸ off å‡½æ•°</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/selector.js" target="_blank" rel="noopener">DOM&amp;CSS æ“ä½œ</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/effects.js" target="_blank" rel="noopener">animation tween å‡½æ•°</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/ajax.js#L386" target="_blank" rel="noopener">Ajax æ“ä½œ</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/dimensions.js" target="_blank" rel="noopener">dimension ä½ç½®ä¸å°ºå¯¸</a></li>
<li><a href="https://github.com/jquery/jquery/blob/master/src/exports/global.js#L15" target="_blank" rel="noopener">noconflict æ“ä½œ</a></li>
</ol>
</blockquote>
<p>ç„¶åç®€å•ä»‹ç»ä¸€ä¸‹ requirejs çš„ amd è§„èŒƒ, è¿™ä¸å‰ç«¯æ¨¡å—åŒ–æœ‰å…³, é‡‡ç”¨å¼‚æ­¥åŠ è½½, <a href="http://www.ruanyifeng.com/blog/2012/11/require_js.html" target="_blank" rel="noopener">è¯¦ç»†çš„çœ‹</a>(ç°åœ¨æ²¡è§è°ç”¨è¿‡= =)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸»æ¨¡å— main.js</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'A'</span>,<span class="string">'jquery'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">a,$</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//code here</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//å…¶ä»–æ–‡ä»¶ å®šä¹‰ä¾èµ– jQuery çš„æ¨¡å—</span></span><br><span class="line">define([<span class="string">'jquery'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> $</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//test.js æ–‡ä»¶ä¸­ å®šä¹‰æ¨¡å— test</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'test'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°ç»†èŠ‚"><a href="#å®ç°ç»†èŠ‚" class="headerlink" title="å®ç°ç»†èŠ‚"></a>å®ç°ç»†èŠ‚</h3><h4 id="ç«‹å³æ‰§è¡Œé—­åŒ…"><a href="#ç«‹å³æ‰§è¡Œé—­åŒ…" class="headerlink" title="ç«‹å³æ‰§è¡Œé—­åŒ…"></a>ç«‹å³æ‰§è¡Œé—­åŒ…</h4><p>å¯¹å¤–åªè¿”å›å‡ºä¸€ä¸ª jQuery ä¸ $ å¯¹è±¡, ä¸æ±¡æŸ“å…¨å±€å˜é‡ã€‚é—­åŒ…ä¸»è¦ä½œç”¨, è®©å‡½æ•°æ‰§è¡Œå®Œåçš„å˜é‡ä»å¯è¢«å¼•ç”¨, å»¶é•¿ç”Ÿå‘½, å½“ç„¶è¿™é‡Œå¹¶ä¸æ„æˆé—­åŒ…, ä¸‹é¢æ¨¡å—ä¸æµè§ˆå™¨å…¼å®¹é‡Œçš„æ‰æ˜¯(å¿…é¡»è¦è¿”å›å‡½æ•°æˆ–è€…setTimeOutç­‰, æ€»ç»“ä¸€ä¸‹å°±æ˜¯ç¨ååœ¨å¤–éƒ¨ä¼šæ‰§è¡Œ)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">global,factory</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//some code</span></span><br><span class="line">  factory(global)</span><br><span class="line">&#125;)(<span class="built_in">window</span>,<span class="function"><span class="keyword">function</span>(<span class="params">window, noGlobal</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//ä¹Ÿæ˜¯ some code</span></span><br><span class="line">  <span class="keyword">if</span> (!noGlobal) &#123;</span><br><span class="line">    <span class="built_in">window</span>.jQuery = <span class="built_in">window</span>.$ = jQuery;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="import-ä¸æµè§ˆå™¨å…¼å®¹"><a href="#import-ä¸æµè§ˆå™¨å…¼å®¹" class="headerlink" title="import ä¸æµè§ˆå™¨å…¼å®¹"></a>import ä¸æµè§ˆå™¨å…¼å®¹</h4><p>æ ¹æ®ä¼ å…¥çš„ global ä¸ module åˆ¤æ–­ç¯å¢ƒ, å†é€‰æ‹©æ‰§è¡Œæ¨¡å¼</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">global,factory</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">module</span> === <span class="string">'object'</span>)&#123;</span><br><span class="line">    <span class="built_in">module</span>.exports = global.document</span><br><span class="line">      ? factory(global, <span class="literal">true</span>) <span class="comment">//å°±ä¸ä¼šæœ‰  window.xxx çš„ç»‘å®šäº†, è€Œåªæ˜¯è¿”å› jQuery</span></span><br><span class="line">      : <span class="function"><span class="keyword">function</span>(<span class="params">w</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (!w.document) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'jQuery requires a window with a document'</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> factory(w);</span><br><span class="line">        &#125;;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    factory(global) <span class="comment">//æ²¡æœ‰ module çš„è¯ç›´æ¥è¿è¡Œ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="built_in">window</span>,<span class="function"><span class="keyword">function</span>(<span class="params">window, noGlobal</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//è¿˜æ˜¯ some code</span></span><br><span class="line">  <span class="keyword">if</span> (!noGlobal) &#123;</span><br><span class="line">    <span class="built_in">window</span>.jQuery = <span class="built_in">window</span>.$ = jQuery;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> jQuery</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="jQuery-ä¸-jQuery-fn"><a href="#jQuery-ä¸-jQuery-fn" class="headerlink" title="jQuery ä¸ jQuery.fn"></a>jQuery ä¸ jQuery.fn</h4><p>jQuery.fn çš„æ–¹æ³•éœ€è¦è¿›è¡Œåˆå§‹åŒ–, è€Œç›´æ¥åœ¨jQueryä¸Šå†™å®šçš„æ–¹æ³•åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>$.ajax</code> æ¥æ‰§è¡Œ</p>
<p><img src="/image/jQuery-1.png" alt="jQueryä¸Šçš„æ–¹æ³•"></p>
<p><img src="/image/jquery-2.png" alt="jQuery.fnä¸Šçš„æ–¹æ³•"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jQuery.fn = jQuery.prototype = &#123;</span><br><span class="line">  <span class="comment">//some code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/image/jQuery-3.png" alt="jQueryåŸå‹é“¾"></p>
<h4 id="æ— -new-è¿”å›å¯¹è±¡"><a href="#æ— -new-è¿”å›å¯¹è±¡" class="headerlink" title="æ—  new è¿”å›å¯¹è±¡"></a>æ—  new è¿”å›å¯¹è±¡</h4><p>æ²¡æœ‰ä½¿ç”¨ new å´æ„é€ å‡ºäº†æ–°çš„å¯¹è±¡, é€šè¿‡åŸå‹é“¾è®© init çš„å¯¹è±¡èƒ½ä½¿ç”¨jQueryåŸå‹æ–¹æ³•, å¦å¤– jQuery å¯ä»¥é€šè¿‡ä¸åŒçš„ selector åˆ›å»ºå¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">jQuery = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init(selector, context);</span><br><span class="line">&#125;</span><br><span class="line">jQuery.fn = jQuery.prototype = &#123;&#125;</span><br><span class="line"><span class="comment">// some code</span></span><br><span class="line">init = (jQuery.fn.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector,context,root</span>)</span>&#123;</span><br><span class="line">  context = context?context:<span class="built_in">window</span>.document</span><br><span class="line">  <span class="keyword">var</span> elem = context.querySelectorAll(slector)</span><br><span class="line">  <span class="keyword">if</span>(elem.length !== <span class="number">0</span>)&#123;</span><br><span class="line">    elem.forEach(<span class="function">(<span class="params">i,ind</span>)=&gt;</span>&#123;<span class="keyword">this</span>[ind]=i&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.length = elem.length</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;<span class="comment">//</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//è®©è¿™æ ·åˆ›é€ çš„å¯¹è±¡èƒ½ä½¿ç”¨jQueryåŸå‹æ–¹æ³•çš„å…³é”®</span></span><br><span class="line">init.prototype = jQuery.fn;</span><br></pre></td></tr></table></figure>

<h4 id="jQuery-çš„-extend-æ–¹æ³•"><a href="#jQuery-çš„-extend-æ–¹æ³•" class="headerlink" title="jQuery çš„ extend æ–¹æ³•"></a>jQuery çš„ extend æ–¹æ³•</h4><p>ä¸ºjQueryæ·»åŠ æ–¹æ³•, åˆ†ä¸ºjQuery.extendä¸jQuery.fn.extend,ä¸€ä¸ªç»™æœ¬èº«ä¸€ä¸ªç»™åŸå‹é“¾, åŸç†æ˜¯è°ƒç”¨çš„æ—¶å€™ this æ˜¯ä¸åŒçš„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jQuery.extend = jQuery.fn.extend = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (name <span class="keyword">in</span> <span class="built_in">arguments</span>[<span class="number">0</span>]) &#123;</span><br><span class="line">  <span class="keyword">this</span>[name] = <span class="built_in">arguments</span>[name]</span><br><span class="line">&#125;<span class="comment">//ç„¶åå®Œå–„çš„è¯, 1.å¤šä¸ªå‚æ•°é‡è½½2.æ·±å¤åˆ¶3.é˜²æ­¢bugå¦‚æœ‰ç¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><figcaption><span>jQuery.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//some code</span></span><br><span class="line">length = <span class="built_in">arguments</span>.length,</span><br><span class="line">      deep = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">console</span>.dir(<span class="keyword">this</span>) <span class="comment">//æ‰“å°ä¸€ä¸‹å°±çŸ¥é“äº†</span></span><br><span class="line">    <span class="comment">// Handle a deep copy situation</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> target === <span class="string">'boolean'</span>) &#123;</span><br><span class="line">      deep = target;</span><br><span class="line"><span class="comment">//some code</span></span><br></pre></td></tr></table></figure>

<p><img src="/image/jQuery-4.png" alt="ä¸€ä¸ªæ˜¯jQueryæœ¬èº«, ä¸€ä¸ªæ˜¯å®ƒçš„åŸå‹å¯¹è±¡"></p>
<h3 id="æ¯”è¾ƒæ ¸å¿ƒ-æƒ³å†™-çš„æ–¹æ³•"><a href="#æ¯”è¾ƒæ ¸å¿ƒ-æƒ³å†™-çš„æ–¹æ³•" class="headerlink" title="æ¯”è¾ƒæ ¸å¿ƒ(æƒ³å†™)çš„æ–¹æ³•"></a>æ¯”è¾ƒæ ¸å¿ƒ(æƒ³å†™)çš„æ–¹æ³•</h3><h4 id="dom-æ“ä½œ"><a href="#dom-æ“ä½œ" class="headerlink" title="dom æ“ä½œ"></a>dom æ“ä½œ</h4><p>è¿™é‡Œç”¨å…¶ä»–å‡ ä¸ªå‡½æ•°åŒ…è£…äº†ä¸€ä¸ªç§æœ‰å‡½æ•°, é€šè¿‡ä¼ å…¥çš„å›è°ƒå‡½æ•°ä¸åŒå®ç°ä¸åŒçš„åŠŸèƒ½, å§‘ä¸”å°±å«å›è°ƒåŒ…è£…å§, å‡½æ•° domManip çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯æ·»åŠ  DOM å…ƒç´ , ç”±æ·»åŠ çš„ä½ç½®ä¸åŒè€Œæä¾›äº†å››ä¸ªå…¬å¼€å‡½æ•° appendã€prependã€beforeã€after, åŒæ—¶è¿˜å¯ä»¥æ‰§è¡Œè„šæœ¬, å¯¹å­—ç¬¦ä¸²è¿˜ä¼šè§£æä¸ºèŠ‚ç‚¹, å¦‚æœæ˜¯ script:src ä¼šè¿œç¨‹ä¸‹è½½åæ‰§è¡Œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">jQuery.fn.after = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> domManip(<span class="keyword">this</span>, aruguments, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.parentNode)&#123;</span><br><span class="line">      <span class="comment">//æ­¤å¤„çš„ this ä»åæ–‡å¯ä»¥çœ‹å‡ºæ˜¯ä¸€ä¸ªdomå…ƒç´ </span></span><br><span class="line">      <span class="keyword">this</span>.parentNode.insertBefore(e, <span class="keyword">this</span>.nextSibling);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//args å‡å®šåªæœ‰ä¸€ç§ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">domManip</span>(<span class="params">collection, args, callback</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//è¿™æ˜¯ä¸ªç§æœ‰å‡½æ•°</span></span><br><span class="line">  <span class="keyword">var</span> args = concat.apply([], args),</span><br><span class="line">  length = collection.length</span><br><span class="line">  <span class="keyword">if</span>(length &gt; <span class="number">1</span>)&#123;</span><br><span class="line">    collection.forEach(<span class="function"><span class="params">i</span>=&gt;</span>&#123;</span><br><span class="line">      domManip(i, args, callback)</span><br><span class="line">    &#125;)<span class="comment">// ä¸ºäº†é“¾å¼è°ƒç”¨çš„è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> collection</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    callback.call(collection[<span class="number">0</span>], args);</span><br><span class="line">  &#125;<span class="comment">//åç»­1.å‚æ•°åˆ¤æ–­2.è„šæœ¬æ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="attr-æ“ä½œ"><a href="#attr-æ“ä½œ" class="headerlink" title="attr æ“ä½œ"></a>attr æ“ä½œ</h4><p>å¾ˆå¤šæœ‰å…³å±æ€§çš„æ“ä½œåŒ…æ‹¬css()æ–¹æ³•éƒ½æ˜¯ä¾é è¿™ä¹ˆä¸€ä¸ªç§æœ‰å‡½æ•° <code>access</code> æ¥å®ç°çš„, ä»æ³¨é‡Šä¸Šå¯ä»¥çœ‹å‡º, è¿™æ˜¯ä¸€ä¸ªå¯¹é›†åˆå…ƒç´ è¿›è¡Œget æˆ– set æ“ä½œçš„å¤šåŠŸèƒ½æ–¹æ³•, å½“ç„¶ä¸»è¦åŠŸèƒ½è¿˜æ˜¯ä¼ å…¥çš„å›è°ƒå‡½æ•° fn æ¥å®ç°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">jQuery.fn.css = <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> access(</span><br><span class="line">  <span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">elem, name, value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//åç»­å†™åœ¨æ’ä»¶éƒ¨åˆ†é‡Œ, ä¸ç„¶è¿™é‡Œå¤ªé•¿äº†</span></span><br><span class="line">    <span class="keyword">return</span> value !== <span class="literal">undefined</span> ?</span><br><span class="line">    jQuery.style(elem, name, value):</span><br><span class="line">    jQuery.css(elem, name);</span><br><span class="line">  &#125;, name, value);</span><br><span class="line">&#125;</span><br><span class="line">jQuery.fn.attr = <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//jQuery.attr åªæ˜¯ä¸ºäº†è¿‘ä¼¼jQueryçš„å†™æ³•(ç…§æŠ„è¿‡æ¥çš„)</span></span><br><span class="line">  <span class="keyword">return</span> access(<span class="keyword">this</span>, jQuery.attr, name, value);</span><br><span class="line">&#125;</span><br><span class="line">jQuery.attr = <span class="function"><span class="keyword">function</span>(<span class="params">elem, name, value</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(value === <span class="literal">undefined</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> elem.getAttribute(name)</span><br><span class="line">  &#125;</span><br><span class="line">  elem.setAttribute(name, value + <span class="string">''</span>);</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">access</span>(<span class="params">elems, fn, key, value</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = elems.length</span><br><span class="line">  <span class="comment">// set</span></span><br><span class="line">  <span class="keyword">if</span>(value != <span class="literal">undefined</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span> (; i &lt; len; i++) &#123;</span><br><span class="line">        fn(elems[i], key, value);</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">return</span> elems</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// get</span></span><br><span class="line">  <span class="keyword">return</span> fn(elems[<span class="number">0</span>],key) <span class="comment">// jQuery åªä¼šè¿”å›ç¬¬ä¸€ä¸ªçš„å±æ€§å€¼</span></span><br><span class="line">&#125; <span class="comment">//åç»­1.å‚æ•°é‡è½½(åˆ¤æ–­å‚æ•°ç±»å‹å¾—åˆ°ä¸åŒçš„æ‰§è¡Œè¿‡ç¨‹)</span></span><br></pre></td></tr></table></figure>

<br>

<blockquote>
<p>åŸºæœ¬ä¸Šä¸€ä¸ªå¼€æºé¡¹ç›®æœ‰ä¸å°‘å†…å®¹éƒ½æ˜¯åç»­å‘ä¸‹å…¼å®¹æˆ–è€…åŠŸèƒ½æ·»åŠ å®Œå–„ä¸Šå»çš„, å¯ä»¥å­¦ä¹ ä¸€ä¸‹ä»£ç ç»“æ„å’Œè¿è¡Œæµç¨‹ä¸åŸç†, è‡³äºæ¨¡å—ç»„ç»‡, ç°é˜¶æ®µæˆ‘è§‰å¾—éƒ½å·®ä¸å¤š, ä¸çŸ¥é“requirejs æ·˜æ±°çš„åŸå› (ä¹Ÿè®¸ä¹Ÿæ²¡æ·˜æ±°?åªæ˜¯es6è®©ä»–ä¸å†å±äºè¿™ä¸ªæ—¶ä»£)</p>
</blockquote>
<br>

<p><strong>å‚è€ƒæ–‡ç« </strong>:</p>
<p><a href="https://www.cnblogs.com/aaronjs/p/3279314.html" target="_blank" rel="noopener">jQueryæºç åˆ†æç³»åˆ—</a></p>
<p><a href="https://github.com/JsAaron/jQuery" target="_blank" rel="noopener">å‰ç«¯JQueryç³»åˆ—</a></p>
<p><a href="https://www.cnblogs.com/snandy/p/5836155.html" target="_blank" rel="noopener">jQuery 3.0çš„domManipæµ…æ</a></p>
</div>
          <hr>
        </div>
        <div class="recent-post-item article-container"><a class="article-title" href="/2019/09/29/prototype-new/">prototype new</a>
          <time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-29
          </time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/js/">js</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Javascript/">Javascript</a></span>
          <div class="content"><h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><p>é¦–å…ˆæ¥è®² new , è¿™ä¸ªå…³é”®è¯ä¸»è¦å°±æ˜¯ç”¨åœ¨åˆ›å»ºç±»æˆ–å‡½æ•°çš„å®ä¾‹ä¸Šçš„ã€‚å½“ç„¶, ç±»å…¶å®æ˜¯æ„é€ å‡½æ•°çš„è¯­æ³•ç³–, è®©è¯­è¨€çš„è¡¨è¾¾æ›´ç›´è§‚ã€‚</p>
<p>new çš„æ“ä½œæµç¨‹å¦‚ä¸‹:</p>
<blockquote>
<ol>
<li>åˆ›å»ºç©ºçš„ JavaScript å¯¹è±¡, Object.create(null)</li>
<li>æŒ‡å®šæ„é€ å‡½æ•°, ç»‘å®šåŸå‹é“¾, obj.__proto__ = Func.prototype</li>
<li>ç»‘å®šobjä¸ºthisåè¿è¡Œ Func.call(obj,arguments) è·å¾—è¿”å›å€¼</li>
<li>åˆ¤æ–­è¿”å›å€¼æ˜¯å¦ä¸ºå¯¹è±¡, å¦å®šçš„è¯è¿”å›æ„é€ çš„å¯¹è±¡, è‚¯å®šçš„è¯è¿”å›æ—¢å®šè¿”å›å€¼</li>
</ol>
</blockquote>
<p><a href="https://github.com/mqyqingfeng/Blog/issues/13" target="_blank" rel="noopener">å…·ä½“å¯ä»¥çœ‹</a></p></div><a class="more" href="/2019/09/29/prototype-new/#more">é˜…è¯»æ›´å¤š</a>
          <hr>
        </div>
        <div class="recent-post-item article-container"><a class="article-title" href="/2019/09/16/this-apply-call/">this,apply,call</a>
          <time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-16
          </time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/js/">Javascript</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/js/">js</a></span>
          <div class="content"><h2 id="ä»€ä¹ˆæ˜¯-this"><a href="#ä»€ä¹ˆæ˜¯-this" class="headerlink" title="ä»€ä¹ˆæ˜¯ this"></a>ä»€ä¹ˆæ˜¯ this</h2><p>this é¦–å…ˆæ˜¯ä¸€ä¸ªå¯¹è±¡(åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¹Ÿä¼šæ˜¯ undefined),å½“ç„¶åœ¨ <em>MDN</em> ä¸­ä¹Ÿè¢«å½¢å®¹ä¸ºå½“å‰æ‰§è¡Œä»£ç çš„ç¯å¢ƒå¯¹è±¡ã€‚è¿™ä¹ˆç§°å‘¼çš„åŸå› å’Œå‡½æ•°çš„è°ƒç”¨æœ‰å…³ç³»,ä¾‹å¦‚:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(name)</span><br><span class="line">&#125;</span><br><span class="line">test(<span class="string">'123'</span>)</span><br><span class="line">test.call(<span class="literal">undefined</span>,<span class="string">'123'</span>)</span><br></pre></td></tr></table></figure></div><a class="more" href="/2019/09/16/this-apply-call/#more">é˜…è¯»æ›´å¤š</a>
          <hr>
        </div>
        <div class="recent-post-item article-container"><a class="article-title" href="/2019/09/10/hello-world/">Hello World</a>
          <time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-10
          </time>
          <div class="content"><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>
</div>
          <hr>
        </div>
        <nav id="pagination">
          <div class="pagination"><a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
          </div>
        </nav>
      </div>
    </div>
    <footer class="footer-bg" style="background-image: url(http://img.luckyray.cn/896653.jpg)">
      <div class="layout" id="footer">
        <div class="copyright">&copy;2019 - 2020 By null</div>
        <div class="framework-info"><span>é©±åŠ¨ - </span><a href="#"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ - </span><a href="#"><span>diary</span></a></div>
      </div>
    </footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i>
    <script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script>
    <script src="/js/utils.js?version=1.6.1"></script>
    <script src="/js/fancybox.js?version=1.6.1"></script>
    <script src="/js/sidebar.js?version=1.6.1"></script>
    <script src="/js/copy.js?version=1.6.1"></script>
    <script src="/js/fireworks.js?version=1.6.1"></script>
    <script src="/js/transition.js?version=1.6.1"></script>
    <script src="/js/scroll.js?version=1.6.1"></script>
    <script src="/js/head.js?version=1.6.1"></script>
    <script>
      if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
        $('#nav').addClass('is-mobile')
        $('footer').addClass('is-mobile')
      }
    </script>
  <script src="https://cdn.bootcss.com/vue/2.6.10/vue.min.js"></script> <script>window.hexoHistoryConfig = {"repo":"luckyray-fan/luckyray-fan.github.io","token":"1d5107f3e8a6dd270b60bb70ffce79485b387e53","theme":"melody"}</script> <script src="/hexo-history-main.js"></script></body>
</html>